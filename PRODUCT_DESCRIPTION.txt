Gym Tracker â€” Product Description (No Login, Web-First)

Overview
Gym Tracker is a web-based fitness tracker designed to be converted into a crossâ€‘platform native app later (iOS/Android/Desktop) with minimal rework. It intentionally has NO login and stores everything locally.

Core Features Implemented
- Dynamic-Island-inspired top UI
  - A centered "pill" overlay at the top of the screen.
  - Tap to expand into a smart search panel.
  - Shows an always-available rest timer in compact mode.
  - Focus Mode: when a workout is active, the Island morphs into a quick logger (one-tap "Add set").
  - Subtle state lighting: green glow for active workout logging, amber glow for rest timer.
  - Tap Assist option: increases touch targets without changing layout (helps reduce missed taps).

  NEW â€” Dynamic Island Enhancements:
  - Contextual states: Island shows different labels based on context (pre-workout, mid-workout, rest day).
  - Gesture-based quick actions:
    - Swipe down: start rest timer (smart duration based on exercise).
    - Swipe up: open focus logger panel.
    - Swipe left/right: cycle between exercises.
  - Progressive Overload Nudge: when you've hit 3+ sets at the same weight with 8+ reps, the Island shows a gold "ðŸ“ˆ Ready to progress" indicator suggesting you increase weight.
  - Superset/Circuit Mode: auto-cycles to the next paired exercise after logging a set (cyan glow when active).
  - Workout Streak Celebration: when you hit milestones (3+ day streak, weekly goal), the Island briefly celebrates with an orange glow and emoji.
  - Morphing Save Button: grows more prominent (green glow, "ðŸ’ª") as you log more sets.

- Workout tracker (live session)
  - Start a workout session.
  - Add exercises.
  - Add sets (reps + weight + unit + optional RPE).
  - Automatically starts a rest timer after logging/completing a set.
  - Save workout to local history.

  NEW â€” Workout Flow Enhancements:
  - Smart Rest Timer: auto-adjusts rest duration based on exercise type.
    - Compound lifts (squat, bench, deadlift, etc.): 2:30 rest.
    - Isolation exercises: 1:15 rest.
  - One-Tap Warm-Up Sets: quickly add 3 warm-up sets (50%Ã—10, 70%Ã—5, 85%Ã—3) based on your working weight.
  - Superset Mode: pair exercises together; after logging a set, automatically switches to the next exercise in the pair.

- Workout logger / history
  - List saved sessions.
  - Open a session detail view showing exercises and sets.

- Calendar
  - Smart month view with markers:
    - planned routine count per day
    - completed workout count per day
  - Tap a day to see:
    - Planned routines (multiple per day) with Start/Skip/Delete actions
    - Completed workouts for that day
  - "Plan" button lets you schedule multiple routines on the same date (with optional time label like AM/PM/18:00).

- Progress
  - Weekly workout goal tracking (simple progress bar).
  - Last-8-weeks consistency visualization (workouts/week bars).
  - Personal records (estimated 1RM) computed from logged weighted sets.

  NEW â€” Progress Enhancements:
  - Workout Streak tracking: see your current consecutive-day workout streak.
  - Progressive overload detection: identifies when you're ready to increase weight on an exercise.

- Smart schedule (lightweight)
  - Suggests the next workout day based on:
    - your preferred training days (Monâ€“Sun toggles)
    - your most recent workout
  - Routine templates can be quick-started (and used for planning via Calendar).

- Smart ID ("Smart encryption ID")
  - A local, privacy-preserving identifier generated randomly and stored locally.
  - Used as an offline "identity anchor" without accounts.
  - Can be copied/regenerated in Settings.

- Experimental features
  - Settings includes an "Experimental" sub-tab with per-feature toggles.
  - Map + Routes (experimental):
    - Create routes by tapping points on a map (polyline).
    - Log route usage categorized as walk/jog/bike.
    - Uses online tiles (may be slower/unstable depending on device/network).
  
  NEW â€” Muscle Heat Map (experimental):
    - Visualize muscle fatigue and training volume across all muscle groups.
    - Body diagram showing color-coded muscle status:
      - Fatigue view: Green = recovered, Yellow = moderate, Red = needs rest.
      - Volume view: Blue = undertrained, Green = optimal, Orange/Red = high volume.
    - Compare your strength to average lifters with similar profile (age, weight, height, gender).
    - Workout suggestions based on muscle fatigue (e.g., "Push muscles fatigued, try pull day").
    - Exercise-to-muscle mapping for 50+ common exercises.
    - User profile setup for personalized strength comparisons.

- Goals & Achievements
  NEW â€” Fitness Goals with Milestones:
    - Create custom fitness goals with multiple milestones.
    - Goal categories: Strength, Endurance, Weight Loss, Muscle Gain, Flexibility, Consistency, Custom.
    - Track milestone completion with progress visualization.
    - View active and completed goals separately.
    - Goals card on Progress screen shows quick overview.
  
  NEW â€” Achievements (Placeholder):
    - Achievement grid showing locked/unlocked badges.
    - Placeholder achievements: First Workout, Week Warrior, Streak Master, Century Club, Heavy Lifter, Goal Getter, Consistency King, PR Hunter.
    - Full achievement tracking coming soon.

Design Goals
- Web-first but native-ready: build once, ship everywhere.
- No account friction: immediate use, fully offline.
- Dark/black theme: optimized for gym environments and OLED screens.
- Fast interaction: Dynamic Island overlay keeps search + timers always reachable.
- Morphing UI: buttons and states visually transform to guide user actions.
- Progressive disclosure: advanced features (superset mode, smart rest) available but not overwhelming.

What was used (and why)
- Flutter (UI framework)
  - Why: One codebase for web + iOS + Android + desktop.
  - Why: Rapid UI iteration and strong component model.

- Material 3 + custom dark theme
  - Why: Modern UI foundations and accessibility defaults.
  - Why: We force a black/dark palette to match the requested aesthetic.

- SharedPreferences (local persistence)
  - Why: Simple, reliable storage for an offline-first prototype.
  - How: The app persists a small JSON "database" blob with sessions and preferences.

- A simple local data model (JSON)
  - Why: Enables richer data than a list of strings (sessions â†’ exercises â†’ sets).
  - Why: Keeps future migration paths open (export/import, syncing, analytics).

- Smart schedule logic (rule-based)
  - Why: No backend, no ML required.
  - Why: Still provides helpful suggestions based on behavior.

- Smart search (in the Dynamic Island)
  - Why: Quickly add exercises from past sessions; fast navigation.
  - How: Searches across recent sessions + the active session.

- RPE + PR estimation (lightweight analytics)
  - Why: RPE captures difficulty, PRs show progress at a glance.
  - How: RPE is stored per set; PRs use a simple 1RM estimate from logged sets.

- Gesture-based interactions
  - Why: Reduces tap count; more intuitive for quick gym use.
  - How: Swipe gestures on Dynamic Island for common actions.

- Smart rest timer (exercise-type detection)
  - Why: Different exercises need different rest times.
  - How: Pattern-matches exercise names against compound lift keywords.

Where things live in the code
- App entry/theme: lib/main.dart
- App state + persistence + Smart ID: lib/state/app_state.dart
  - Progressive overload detection
  - Streak calculation
  - Smart rest logic
  - Superset mode state
  - Warm-up set generation
  - Muscle heat map calculations (exercise-to-muscle mapping, fatigue/volume)
  - Strength comparison logic (vs average lifters)
  - Fitness goals with milestones
  - User profile for comparisons
  - Achievement definitions and unlock logic
  - Rest timer vibration alerts
- Tab shell + overlay: lib/ui/root_shell.dart
- Dynamic Island: lib/ui/widgets/dynamic_island.dart
  - Gesture detection
  - Contextual states
  - Progressive overload nudge UI
  - Superset mode UI
  - Streak celebration
  - Morphing save button
  - Warm-up dialog
- Screens:
  - Workout: lib/ui/screens/workout_screen.dart
  - Log: lib/ui/screens/log_screen.dart
  - Calendar: lib/ui/screens/calendar_screen.dart
  - Schedule: lib/ui/screens/schedule_screen.dart
  - Settings: lib/ui/screens/settings_screen.dart
    - Smart rest toggle
    - Timer alerts toggle (vibration)
    - Superset mode toggle
    - Experimental features (Map, Heat Map)
  - Progress: lib/ui/screens/progress_screen.dart
    - Goals card with quick access
  - Goals & Achievements: lib/ui/screens/goals_screen.dart
    - Goals tab with milestone tracking
    - Achievements tab with unlock progress and golden styling
  - Muscle Heat Map: lib/ui/screens/muscle_heat_map_screen.dart
    - Fatigue view
    - Volume view
    - Strength comparison view
    - User profile dialog

Current limitations (intentional for v1)
- No cloud sync and no login.
- No export/import yet (recommended next if you want device-to-device portability).
- Encryption is not end-to-end yet; the Smart ID is an offline identifier, not encrypted storage.
- Live Activities / Lock Screen widgets not yet implemented (iOS-specific).

Recommended next upgrades
- Export/import (encrypted) using the Smart ID as a key-derivation seed.
- iOS Live Activities integration for rest timer on lock screen.
- Voice logging ("Add set, 10 reps, 80 kg").
- Watch integration (Apple Watch / Wear OS).
- âœ… Exercise library with muscle group tagging (implemented in Heat Map).
- âœ… Volume tracking (sets Ã— reps Ã— weight per muscle group) (implemented in Heat Map).
- âœ… Rest timer vibration alerts (implemented â€” double haptic pulse when timer ends).
- âœ… Achievement unlocking logic (implemented â€” 12 achievements with auto-unlock + progress tracking).
- Social features (share progress, compare with friends).
- Workout templates from AI suggestions.

New Feature Summary (This Update)
1. Progressive Overload Nudge â€” Gold indicator when ready to increase weight.
2. Superset/Circuit Mode â€” Auto-cycle exercises, cyan glow, long-press to pair.
3. One-Tap Warm-Up Sets â€” Add 3 warm-up sets at 50/70/85% of working weight.
4. Gesture-Based Quick Actions â€” Swipe down/up/left/right on Dynamic Island.
5. Smart Rest Auto-Adjust â€” 2:30 for compounds, 1:15 for isolation.
6. Contextual Island States â€” Different labels for rest day, pre-workout, etc.
7. Morphing Save Button â€” Grows and glows green as you log more sets.
8. Workout Streak Celebration â€” Orange glow and emoji when hitting milestones.

Latest Update â€” Muscle Heat Map & Goals:
9. Muscle Heat Map (Experimental) â€” Visualize muscle fatigue and training volume.
   - Body diagram with color-coded muscle groups.
   - Fatigue tracking helps plan recovery and avoid overtraining.
   - Volume tracking shows if muscles are undertrained or overtrained.
   - Compare your strength to average lifters with similar profile.
   - Smart workout suggestions based on current muscle fatigue.
10. User Profile â€” Set age, weight, height, gender for personalized comparisons.
11. Fitness Goals with Milestones â€” Create goals, add milestones, track progress.
    - Multiple goal categories (strength, endurance, weight loss, etc.).
    - Milestone completion tracking with checkboxes.
    - Progress visualization on goal cards.
12. Achievements â€” Fully functional achievement system.
    - 12 unique achievements (First Workout, Week Warrior, Streak Master, Century Club, etc.).
    - Auto-unlock when conditions are met (checked after each workout).
    - Progress tracking with percentage display for locked achievements.
    - Visual progress ring around locked achievement icons.
    - Golden glow and styling for unlocked achievements.
13. Rest Timer Alerts â€” Vibration feedback when timer completes.
    - Double haptic pulse for attention.
    - Configurable on/off in Settings.

Update policy
- Keep this file updated as features are added/changed so it always reflects what the app does and why the architecture choices were made.
